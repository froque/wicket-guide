<!DOCTYPE html>
<html>
<head>
    <title>Apache Wicket - Build a release</title>

	<link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen" />

    <!--[if lt ie 7]>
	<link rel="stylesheet" href="/css/ie.css" type="text/css" media="screen" />
    <![endif]-->
    <link rel="shortcut icon" href="/favicon.ico" type="image/vnd.microsoft.icon" />
	<link rel="alternate" type="application/atom+xml" href="/atom.xml" />
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
</head>
<body>
<div id="container">
    <div id="content">
        <div id="header"><a href="/"><h1 id="logo"><span>Apache Wicket</span></h1></a></div>
		<div id="navigation">
	<h5><a name="Navigation-Wicket"></a>Meet Wicket</h5>
	<ul>
		<li>
			<a href="/" title="Index">Home</a>
		</li>
		<li>
			<a href="/meet/introduction.html" title="Introduction">Introduction</a>
		</li>
		<li>
			<a href="/meet/features.html" title="Features">Features</a>
		</li>
		<li>
			<a href="/meet/buzz.html" title="Buzz">Buzz</a>
		</li>
		<li>
			<a href="/meet/vision.html" title="Vision">Vision</a>
		</li>
		<li>
			<a href="/meet/blogs.html" title="Blogs">Blogs</a>
		</li>
	</ul>
	<h5>
		<a name="Navigation-GettingStarted" id="Navigation-GettingStarted"></a>Get Started
	</h5>
	<ul>
		<li>
			<a href="/start/download.html" title="Download Wicket">Download Wicket</a>
		</li>
		<li>
			<a href="/start/quickstart.html" title="Getting started via a Maven Archetype">Quickstart</a>
		</li>
		<li>
			<a href="http://www.jweekend.com/dev/LegUp" rel="nofollow">More archetypes</a>
		</li>
		<li>
			<a href="/help" title="Get help">Get help</a>
		</li>
	</ul>
	<h5>
		<a name="Navigation-Documentation" id="Navigation-Documentation"></a>Learn
	</h5>
	<ul>
		<li>
			<a href="/learn/examples" title="Examples">Examples</a>
		</li>
		<li>
			<a href="http://wicketstuff.org/wicket14/compref/">Components</a>
		</li>
		<li>
			<a href="/learn/projects/" title="Projects extending basic Wicket">Projects</a>
		</li>
		<li>
			<a href="http://cwiki.apache.org/WICKET">Wiki</a>
		</li>
		<li>
			<a href="http://cwiki.apache.org/WICKET/reference-library.html">Reference guide</a>
		</li>
		<li>
			<a href="/learn/books" title="Books">Books</a>
		</li>
		<li>
			<a href="/learn/ides.html" title="IDEs">IDE plugins</a>
		</li>
	</ul>
	<h5>
		<a name="Navigation-Releases" id="Navigation-Releases"></a>Releases
	</h5>
	<ul>
		<li>
			<a href="http://www.apache.org/dyn/closer.cgi/wicket/1.4.11">Wicket 1.4</a>
			(<a href="http://wicket.apache.org/apidocs/1.4" title="JavaDocs of the latest stable release - 1.4.x">docs</a>)
		</li>
		<li>
			<a href="http://www.apache.org/dyn/closer.cgi/wicket/1.3.7">Wicket 1.3</a>
			(<a href="http://wicket.apache.org/apidocs/1.3" title="JavaDocs of Apache Wicket 1.3.x">docs</a>)
		</li>
		<li>
			<a href="http://wicket.sf.net/wicket-1.2" class="external-link" rel="nofollow">Wicket 1.2</a>
		</li>
		<li>
			<a href="http://wicket.sf.net/wicket-1.1" class="external-link" rel="nofollow">Wicket 1.1</a>
		</li>
		<li>
			<a href="http://wicket.sf.net/wicket-1.0" class="external-link" rel="nofollow">Wicket 1.0</a>
		</li>
	</ul>
	<h5>
		<a name="Navigation-Developers" id="Navigation-Developers"></a>Contribute
	</h5>
	<ul>
		<li>
			<a href="/contribute/write.html" title="Writing documentation">Writing docs</a>
		</li>
		<li>
			<a href="/contribute/build.html" title="Building from SVN">Build Wicket</a>
		</li>
		<li>
			<a href="/contribute/patch.html" title="Provide a patch">Provide a patch</a>
		</li>
		<li>
			<a href="/contribute/release.html" title="Release Wicket">Release Wicket</a>
		</li>
		<li>
			<a href="http://fisheye6.atlassian.com/browse/wicket" title="SVN Overview" class="external-link" rel="nofollow">Fisheye</a>
		</li>
	</ul>
	<h5>
		<a name="Navigation-Apache" id="Navigation-Apache"></a>Apache
	</h5>
	<ul>
		<li>
			<a href="http://www.apache.org/" class="external-link" rel="nofollow">Apache</a>
		</li>
		<li>
			<a href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">License</a>
		</li>
		<li>
			<a href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">Sponsorship</a>
		</li>
		<li>
			<a href="http://apache.org/foundation/thanks.html" class="external-link" rel="nofollow">Thanks</a>
		</li>
	</ul>
</div>

		<div id="contentbody">
			<h1>Build a release</h1>
			<h2 id='contents'>Contents</h2>

<ul>
<li><a href='#release-14'>Releasing Apache Wicket 1.4.x</a></li>

<li><a href='#release-13'>Releasing Apache Wicket 1.3.x</a></li>

<li><a href='#mirrors'>Uploading to the mirror system</a></li>

<li><a href='#mavencentral'>Uploading to maven repository</a></li>

<li><a href='#announcing'>Announcing the release</a></li>

<li><a href='#additional'>Additional tasks</a></li>
</ul>

<h2 id='release-14'>Releasing Apache Wicket 1.4.x</h2>

<h3 id='building_the_release'>Building the release</h3>

<ul>
<li>query dev@ for any open issues, it helps to look at JIRA first</li>

<li>create tag, create release branch</li>

<li>check out release branch</li>

<li>Set correct version in the pom files</li>

<li>Linux</li>
</ul>
<div class='highlight'><pre><code class='console'><span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i -e &quot;s/1.4-SNAPSHOT/1.4-m1/g&quot;</span>
<span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i -e &quot;s/wicket\/trunk/wicket\/releases\/wicket-1.4-m1/g&quot;</span>
</code></pre>
</div>
<ul>
<li>Mac OS X</li>
</ul>
<div class='highlight'><pre><code class='console'><span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i &quot;&quot; -e &quot;s/1.4-SNAPSHOT/1.4-m1/g&quot;</span>
<span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i &quot;&quot; -e &quot;s/wicket\/trunk/wicket\/releases\/wicket-1.4-m1/g&quot;</span>
</code></pre>
</div>
<ul>
<li>add JIRA generated release notes to CHANGELOG-1.4</li>

<li>commit to release branch</li>

<li>call release.sh (see note)</li>

<li>test the distribution (examples, rat, etc)</li>

<li>upload m2-repo and dist directory from target/ to p.a.o (see below)</li>

<li>upload commons/KEY into dist folder on p.a.o</li>

<li>send vote message</li>

<li>wait</li>

<li>upload to mirrors (see below)</li>

<li>release the version in JIRA</li>

<li>wait 24 hours for mirrors to pick them up</li>

<li>announce</li>
</ul>

<p>NOTE: If you get an error while generating javadocs like the one that follows, run a <code>mvn clean install</code> followed by a <code>mvn javadoc:jar</code>, then re-run <code>release.sh</code>. Example of error: <code>java.lang.ClassCastException:
com.sun.tools.javadoc.ClassDocImpl</code></p>
<a name='release-1.3.x'>&nbsp;</a>
<h2 id='release13'>Releasing Apache Wicket 1.3.x</h2>

<h3 id='building_the_release'>Building the release</h3>

<ul>
<li>query dev@ for any open issues, it helps to look at JIRA first</li>

<li>create tag, create release branch</li>

<li>check out release branch</li>

<li>Set correct version in the pom files:</li>

<li>Linux:</li>
</ul>
<div class='highlight'><pre><code class='console'><span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i -e &quot;s/1.3-SNAPSHOT/1.3.2/g&quot;</span>
<span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i -e &quot;s/wicket\/trunk/wicket\/releases\/wicket-1.3.3/g&quot;</span>
</code></pre>
</div>
<ul>
<li>Mac OS X:</li>
</ul>
<div class='highlight'><pre><code class='console'><span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i &quot;&quot; -e &quot;s/1.3-SNAPSHOT/1.3.2/g&quot;</span>
<span class='go'>find . -name &quot;pom.xml&quot; | xargs sed -i &quot;&quot; -e &quot;s/wicket\/trunk/wicket\/releases\/wicket-1.3.3/g&quot;</span>
</code></pre>
</div>
<ul>
<li>add JIRA generated release notes to CHANGELOG-1.3</li>

<li>commit to release branch</li>

<li>call release.sh</li>

<li>test the distribution (examples, rat, etc)</li>

<li>upload m2-repo and dist directory from target/ to p.a.o</li>

<li>upload commons/KEY into dist folder on p.a.o</li>

<li>send vote message</li>

<li>wait</li>

<li>upload to mirrors (see below)</li>

<li>release the version in JIRA</li>

<li>wait 24 hours for mirrors to pick them up</li>

<li>announce</li>
</ul>

<h2 id='mirrors'>Uploading to the mirror system</h2>
<div class='highlight'><pre><code class='console'><span class='go'>ssh people.apache.org</span>
<span class='go'>mkdir /www/www.apache.org/dist/wicket/1.4.0</span>
<span class='go'>mv ~/public_html/wicket-1.4.0/dist/* /www/www.apache.org/dist/wicket/1.4.0</span>
<span class='go'>chown -R :wicket /www/www.apache.org/dist/wicket/1.4.0</span>
</code></pre>
</div>
<p><code>chown</code> is very important, if files do not have the wicket group they will not be copied to mirrors Apache guide to mirros: http://apache.org/dev/mirror-step-by-step.html</p>

<p>It is a good idea to clean up older releases from /www/www.apache.org/dist/wicket/</p>

<h2 id='mavencentral'>Uploading to maven repository</h2>

<p>I haven&#8217;t got any really good way to put them in the maven mirrors. The problem is that right now we override the meta xml files, so only the latest version is listed. If we really should do this perfect we would modify meta files like /org/apache/wicket/wicket/maven-metadata.xml and add the version to it (as well as create the hashes again).</p>

<p>But for now this is sufficient:</p>
<div class='highlight'><pre><code class='console'><span class='go'>cd into the directory you have the artifacts which has been voted on.</span>
<span class='go'>cp -R m2-repo/org/apache/wicket/* /www/people.apache.org/repo/m2-ibiblio-rsync-repository/org/apache/wicket/</span>
<span class='go'>chmod -R g+w * /www/people.apache.org/repo/m2-ibiblio-rsync-repository/org/apache/wicket</span>
</code></pre>
</div>
<p>Further reading: README under /www/people.apache.org/repo/m2-ibiblio-rsync-repository/</p>

<h2 id='announcing'>Announcing the release</h2>

<p>Edit the _config.yaml file. This file contains a site wide configuration section specific to Wicket:</p>
<div class='highlight'><pre><code class='yaml'><span class='l-Scalar-Plain'>wicket</span><span class='p-Indicator'>:</span>
    <span class='l-Scalar-Plain'>version</span><span class='p-Indicator'>:</span>    <span class='l-Scalar-Plain'>1.4.10</span>
    <span class='l-Scalar-Plain'>released</span><span class='p-Indicator'>:</span>   <span class='l-Scalar-Plain'>2010-08-11</span>
    <span class='l-Scalar-Plain'>versions</span><span class='p-Indicator'>:</span>   <span class='p-Indicator'>[</span><span class='nv'>1.3.7</span><span class='p-Indicator'>,</span> <span class='nv'>1.3-SNAPSHOT</span><span class='p-Indicator'>,</span> <span class='nv'>1.4.9</span><span class='p-Indicator'>,</span> <span class='nv'>1.4.10</span><span class='p-Indicator'>,</span> <span class='nv'>1.4-SNAPSHOT</span><span class='p-Indicator'>,</span> <span class='nv'>1.5-M1</span><span class='p-Indicator'>,</span> <span class='nv'>1.5-SNAPSHOT</span><span class='p-Indicator'>]</span>
</code></pre>
</div>
<p>You&#8217;ll need to edit this part: modify the version, update the released date, and add the new version to the versions list (remove any stale releases, typically just leave the previous release as well).</p>

<ul>
<li>Write an announcement in the _posts directory</li>

<li>Restart jekyll to regenerate the pages: it will automatically generate the correct links in the navigation menu, quickstart and downloads page. It will update the doap.rdf file, atom.xml rss feed and index.html file so that it contains your announcement.</li>

<li>Send email to: users@wicket.apache.org, dev@wicket.apache.org, announce@wicket.apache.org, announce@apache.org</li>

<li>Misc. websites like javalobby, serverside, onjava etc.</li>
</ul>

<h2 id='additional'>Additional tasks</h2>

<ul>
<li>Commit the JavaDocs to <a href='https://svn.apache.org/repos/asf/wicket/common/site/apidocs/1.4'>https://svn.apache.org/repos/asf/wicket/common/site/apidocs/1.4</a> svnpubsub will push this directly to our website.</li>
</ul>
		</div>
        <div id="clearer"></div>
		<div id="footer"><span>
Copyright &copy; 2010 &mdash; The Apache Software Foundation. Apache Wicket,
Wicket, Apache, the Apache feather logo, and the Apache Wicket project logo
are trademarks of The Apache Software Foundation. All other marks mentioned
may be trademarks or registered trademarks of their respective owners.
</span></div>

    </div>
</div>
</body>
</html>
